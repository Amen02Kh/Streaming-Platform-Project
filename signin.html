<!DOCTYPE html>
<html>
<head>
	<title>Slide Navbar</title>
	
	<link rel="stylesheet" href="./assets/css/style2.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js@1.12.0/src/toastify.min.css">
	<style>
		.alert.alert-success {
			text-align: center;
	background-color: #dff0d8;
	font-size: 16px;
	color: #3c763d;
	border-color: #d6e9c6;
	padding:10px;
	border-radius: 10px;
  }

  .alert.alert-danger {
	text-align: center;
	background-color: #dff0d8;
	font-size: 16px;
	color: #9c1717;
	border-color: #d6e9c6;
	padding:10px;
	border-radius: 10px;
  }
	</style>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/toastify-js@1.12.0/src/toastify.min.js"></script>
</head>
<body>
	

	<div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">
			<div class="signup" id="registration-form">
				<form method="post" id="signup-form" action="../Streaming-Platform-Project/assets/php/register.php">
					<label>Sign up</label>
					<input type="text" name="username" placeholder="User name" id="username" required="">
					<input type="email" name="email" placeholder="Email" id="email"required="">
					<input type="password" name="pswd" placeholder="Password" id="password" required="">
					<button type="submit" name="submit" id="submit-btn">Sign up</button>
				</form>
			</div>

			<div class="login">
				<form method="post" id="login-form" action="../Streaming-Platform-Project/assets/php/login.php">
					<label for="chk" aria-hidden="true">Login</label>
					<input type="text" name="username" placeholder="Username" required="">
					<input type="password" name="password" placeholder="Password" required="">
					<button type="submit" name="submit" id="submit-btn-log">Login</button>
				</form>
			</div>
	</div>
	<script>
$(document).ready(function(){
    $('#login-form').submit(function(e){
        e.preventDefault();
        var username = $('#username').val();
        var password = $('#password').val();
        $.ajax({
            url: '../Streaming-Platform-Project/assets/php/login.php',
            method: 'POST',
            data: {
                username: username,
                password: password,
                
            },
            success: function(response){
				
                if(response.success) {
                    $('.login .alert-success').remove();
                    $('.login').append('<div class="alert alert-success">You are now logged in you will be redirected.</div>');
                    $('#login-form')[0].reset();
                    console.log(response);
                } else {
                    $('.login .alert-danger').remove();
                    $('.login').append('<div class="alert alert-danger">You are not logged in.</div>');
                    $('#login-form')[0].reset();
                    console.log(response);
                }
            }
        });
    });
});











		$(document).ready(function(){
			$('#signup-form').submit(function(e){
				e.preventDefault();
				var username = $('#username').val();
				var email = $('#email').val();
				var password = $('#password').val();
				$.ajax({
					url: '../Streaming-Platform-Project/assets/php/register.php',
					method: 'POST',
					data: {
						username: username,
						email: email,
						password: password,
						submit: true
					},
					success: function(response){
						
						$('.signup .alert-success').remove();
						$('.signup').append('<div class="alert alert-success">You are now registered successfully.</div>');
						$('#signup-form')[0].reset();
						console.log(response);
					}
					
				});
			});
		});
	</script>
		
</body>
</html>